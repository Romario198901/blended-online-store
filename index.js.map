{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const BASE_URL = 'https://dummyjson.com/';\nexport const API_ENDPOINTS = {\n    CATEGORIES: '/products/category-list',\n    PRODUCTS: '/products',\n    SEARCH: '/products/search',\n    CATEGORY: '/products/category/'\n}\nexport const ITEMS_PER_PAGE = 12;\n","import axios from 'axios';\nimport { API_ENDPOINTS, BASE_URL, ITEMS_PER_PAGE } from './constants';\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getCategories() {\n  const { data } = await axios.get(API_ENDPOINTS.CATEGORIES);\n  return data;\n}\nexport async function getProducts(page = 1) {\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.PRODUCTS}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n}\nexport async function getProductsbyQuery(query, page = 1) {\n  if (!query || query.trim() === '') {\n    return { products: [], total: 0, skip: 0, limit: ITEMS_PER_PAGE };\n  }\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const encodedQuery = encodeURIComponent(query);\n  try {\n    const { data } = await axios.get(\n      `${API_ENDPOINTS.SEARCH}?q=${encodedQuery}&limit=${ITEMS_PER_PAGE}&skip=${skip}`\n    );\n    return data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\nexport async function getProductsbyCategory(category, page = 1) {\n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.CATEGORY}${category}?limit=${ITEMS_PER_PAGE}&skip=${skip}`\n  );\n  return data;\n}\n","export const refs = {\n    categoriesList: document.querySelector('.categories'),\n    productsList: document.querySelector('.products'),\n    loadMoreButton: document.querySelector('.load-more-btn'),\n    searchForm: document.querySelector('.search-form'),\n    blockNotFound: document.querySelector('.not-found'),\n    clearInputBtn: document.querySelector('.search-form__btn-clear'),\n};","import { refs } from './refs';\n\nexport function renderCategoryList(categories) {\n  const allCategories = ['All', ...categories];\n  const markup = allCategories\n    .map(\n      category => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>`\n    )\n    .join('');\n  refs.categoriesList.innerHTML = markup;\n  const firstCategoryBtn = document.querySelector('.categories__btn');\n  firstCategoryBtn.classList.add('categories__btn--active');\n}\nexport function renderProducts(products) {\n  const markup = products\n    .map(({id, images, title, brand, category, price}) => {\n      return `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand || \"Unknown\"}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}</p>\n </li>`;\n    })\n    .join('');\n    refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\nexport function clearProducts () {\n  refs.productsList.innerHTML = '';\n}\nexport function showLoadMoreButton() {\n    refs.loadMoreButton.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton() {\n    refs.loadMoreButton.classList.add('is-hidden');\n}\nexport function showBlockNotFound() {\n  refs.blockNotFound.classList.add('not-found--visible');\n}\nexport function hideBlockNotFound() {\n  refs.blockNotFound.classList.remove('not-found--visible');\n}\nexport function hideClearInputBtn () {\n  refs.clearInputBtn.classList.add('is-hidden');\n}\nexport function showClearInputBtn () {\n  refs.clearInputBtn.classList.remove('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { ITEMS_PER_PAGE } from './constants';\nimport { getCategories, getProducts, getProductsbyCategory, getProductsbyQuery } from './products-api';\nimport {\n  clearProducts,\n  hideBlockNotFound,\n  hideClearInputBtn,\n  hideLoadMoreButton,\n  renderCategoryList,\n  renderProducts,\n  showBlockNotFound,\n  showClearInputBtn,\n  showLoadMoreButton,\n} from './render-function';\nimport { refs } from './refs';\nlet currentPage = 1;\nlet totalPages;\nlet searchMode = false;\nlet currentQuery = '';\nexport async function initHomepage() {\n  const categories = await getCategories();\n  renderCategoryList(categories);\n  searchMode = false;\n  currentQuery = '';\n  currentPage = 1;\n  const { products, total } = await getProducts();\n  totalPages = Math.ceil(total / ITEMS_PER_PAGE);\n  if (currentPage <= totalPages) {\n    renderProducts(products);\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    return;\n  }\n}\nexport async function loadMoreBtnClicked() {\n  currentPage += 1;\n  let products;\n  let total;\n  if (searchMode && currentQuery) {\n    ({ products, total } = await getProductsbyQuery(currentQuery, currentPage));\n  } else {\n    ({ products, total } = await getProducts(currentPage));\n  }\n  totalPages = Math.ceil(total / ITEMS_PER_PAGE);\n  if (currentPage <= totalPages) {\n    renderProducts(products);\n    showLoadMoreButton();\n  } else {\n    iziToast.warning({\n      title: '❌',\n      titleColor: '#fafafb',\n      message: `You reached end of the catalogue`,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      position: 'bottomRight',\n    });\n    hideLoadMoreButton();\n    return;\n  }\n}\nexport function searchInputChanged(e) {\n  const input = e.target.value;\n  if (!input || input.length === 0) {\n    hideClearInputBtn();\n  } else {\n    showClearInputBtn();\n  }\n}\nexport async function submitBtnClicked(e) {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const query = formData.get('searchValue').trim();\n  if (!query) {\n    iziToast.error({\n      title: '❌',\n      titleColor: '#fafafb',\n      message: `Enter the search query`,\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n    return;\n  }\n  clearProducts();\n  currentPage = 1;\n  searchMode = true;\n  currentQuery = query;\n  const { products, total } = await getProductsbyQuery(query, currentPage);\n  totalPages = Math.ceil(total / ITEMS_PER_PAGE);\n  if (!products || products.length === 0) {\n    searchMode = false;\n    currentQuery = '';\n    showBlockNotFound();\n    clearProducts();\n    hideLoadMoreButton();\n    return;\n  }\n  hideBlockNotFound();\n  renderProducts(products);\n  if (currentPage < totalPages) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n\nexport async function clearInputBtnClicked() {\n  refs.searchForm.elements.searchValue.value = '';\n  hideClearInputBtn();\n  clearProducts();\n  hideBlockNotFound();\n  searchMode = false;\n    currentQuery = '';\n    currentPage = 1;\n  try {\n    const { products, total } = await getProducts();\n    totalPages = Math.ceil(total / ITEMS_PER_PAGE);\n    if (currentPage <= totalPages) {\n      renderProducts(products);\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      return;\n    }\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\nexport async function filterProductsByCategory(e) {\n  if(e.target.nodeName !== 'BUTTON') {\n    return;\n  }\nconst category = e.target.textContent;\ncurrentPage = 1;\n\n}\n","import { clearInputBtnClicked, filterProductsByCategory, initHomepage, loadMoreBtnClicked, searchInputChanged, submitBtnClicked } from \"./js/handlers\";\nimport { refs } from \"./js/refs\";\n\n\n//Логіка сторінки Home\ndocument.addEventListener('DOMContentLoaded', initHomepage);\nrefs.categoriesList.addEventListener('click', filterProductsByCategory);\nrefs.loadMoreButton.addEventListener('click', loadMoreBtnClicked);\nrefs.searchForm.addEventListener('submit', submitBtnClicked);\nrefs.searchForm.addEventListener('input', searchInputChanged);\nrefs.clearInputBtn.addEventListener('click', clearInputBtnClicked);\n"],"names":["BASE_URL","API_ENDPOINTS","ITEMS_PER_PAGE","axios","getCategories","data","getProducts","page","skip","getProductsbyQuery","query","encodedQuery","error","refs","renderCategoryList","categories","markup","category","renderProducts","products","id","images","title","brand","price","clearProducts","showLoadMoreButton","hideLoadMoreButton","showBlockNotFound","hideBlockNotFound","hideClearInputBtn","showClearInputBtn","currentPage","totalPages","searchMode","currentQuery","initHomepage","total","loadMoreBtnClicked","iziToast","searchInputChanged","e","input","submitBtnClicked","clearInputBtnClicked","filterProductsByCategory"],"mappings":"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"}